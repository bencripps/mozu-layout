!function(a,b,c){var d,e,f,g,h;d=function(){this.dzContainer="dropzone-container",this.dzClassName="dropzone",this.rowClassName="row",this.colClassName="col",this.showtools=!0},e=function(b){this.$element=a(b)},f=function(){this.$element=a("<div>").attr("class",h.rowClassName)},g=function(){this.$element=a("<div>").attr("class",h.colClassName)},h=new d,d.prototype.initDropzones=function(){var b,c=this;a("."+this.dzContainer).each(function(d,e){b=c.getNewDropZone(c),a(e).append(b.$element)}),a('input[type="checkbox"]').on("change",this.toggleToolsets.bind(this))},d.prototype.toggleToolsets=function(){a(".dz-tools").toggle(),this.adjustDZBorders(),this.showtools=!this.showtools},d.prototype.adjustDZBorders=function(){this.showtools?(a(".dropzone").css("border","none"),a(".dropzone:not(:has(.dropzone))").css("border","1px solid gray")):a(".dropzone").css("border","1px solid gray")},d.prototype.getNewDropZone=function(b){var c=new e(a("<div>").attr("class",this.dzClassName));return c.parent=b,c.init(),c},e.prototype.init=function(){this.addTools()},e.prototype.insertRow=function(){if(this.hasChildren("any"))this.doInsertRow();else for(var a=0;1>=a;a++)this.row=new f,this.doInsertRow(),this.$element.append(this.row.$element)},e.prototype.insertCol=function(){var a;if(this.hasChildren("any-row"))if(0===this.hasChildren.call(this.row,"col").length)for(var b=0;1>=b;b++)0===b?(a=new g,this.col=a,this.row.$element.wrap(a.$element)):this.doInsertCol();else this.doInsertCol(),this.row.rebase();else{this.row=new f;for(var c=0;1>=c;c++)this.doInsertCol();this.$element.append(this.row.$element)}},e.prototype.doInsertRow=function(){var a=h.getNewDropZone(this),b=new g;a.col=b,b.$element.addClass("is-row"),b.$element.append(a.$element),this.row.$element.append(b.$element)},e.prototype.doInsertCol=function(){var a=new g,b=h.getNewDropZone(this);b.col=a,a.$element.append(b.$element),this.row.$element.append(a.$element)},e.prototype.hasChildren=function(a){switch(a){case"col":return this.$element.find("> ."+h.colClassName);case"any-row":return this.$element.find("> ."+h.rowClassName).length>0;case"any":return this.$element.find("."+h.dzClassName).length>0;case"num":return this.$element.find("."+h.dzClassName).length}},e.prototype.remove=function(){var a=this.$element.parent();1===this.parent.hasChildren("num")?this.resetParent():((a.hasClass("col")||a.hasClass("row"))&&a.remove(),this.$element.remove(),this.parent.row.rebase())},e.prototype.resetParent=function(){this.parent.$element.html(""),this.parent.addTools(),this.parent.row=void 0},e.prototype.addTools=function(){this.toolset=a('<div class="dz-tools">').append(a("<span>").html('<i class="fa fa-list"></i>').attr("class","add-row").on("click",this.insertRow.bind(this)),a("<span>").html('<i class="fa fa-columns"></i>').attr("class","add-col").on("click",this.insertCol.bind(this))),this.parent instanceof e&&this.toolset.append(a("<span>").html('<i class="fa fa-edit"></i>').attr("class","edit-dz").on("click",this.edit.bind(this)),a("<span>").html('<i class="fa fa-remove"></i>').attr("class","delete-dz").on("click",this.remove.bind(this))),this.toolset.css("display",h.showtools?"block":"none"),this.$element.append(this.toolset)},e.prototype.edit=function(){console.log(this)},f.prototype.rebase=function(){var a=this.$element.find("> .col");a.animate({width:1/a.length*100+"%"})},a(c).on("ready",function(){h.initDropzones()})}(jQuery,window,document);